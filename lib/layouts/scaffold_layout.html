<!--
    App Router Test - dart
    Copyright (c) 2015 pjv

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
--><!--<link rel="import" href="../../../packages/polymer/polymer.html">-->
<html>
<head>
<link rel="import" href="../../../packages/polymer_elements/iron_scaffold.html">
<link rel="import" href="../../../packages/polymer_elements/paper_header_panel.html">
<link rel="import" href="../../../packages/polymer_elements/paper_toolbar.html">
<link rel="import" href="../../../packages/polymer_elements/neon_animated_pages.html">
<link rel="import" href="../../../packages/pushstate_anchor/pushstate_anchor.html">
<link rel="import" href="../../../packages/akepot/menu/menu_admin.html">
<link rel="import" href="../../../packages/akepot/menu/menu_project.html">
<link rel="import" href="../../../packages/akepot/menu/menu_home.html">
<link rel="import" href="../../../packages/akepot/dropdown_menu.html">
<link rel="import" href="../../../packages/akepot/refresh_spinner.html">
<link rel="import" href="../../../packages/polymer_elements/iron_signals.html">
<link rel="import" href="../../../packages/akepot/menu/title_page.html">
<link rel="import" href="../../../packages/polymer_elements/iron_flex_layout.html">
<dom-module id="scaffold-layout">
  <style>
    /* TODO(polyup): For speed, consider reworking these styles with .classes
                     and #ids rather than [attributes].
    */
    [layout] {
      @apply(--layout);
    }
    [layout][vertical] {
      @apply(--layout-vertical);
    }
    [hidden] {
      display: none !important;
    }
    [fit] {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }
  </style>
  <link rel="import" type="css" href="scaffold_layout.css">
  <template>

    <core-scaffold id="core_scaffold" mode="waterfall-tall">
      <paper-header-panel mode="scroll" id="core_header_panel" navigation flex>
        <paper-toolbar id="panel-head" class="core-header tall">
          <!-- <core-image src="{{service.user.cover}}" sizing="cover" preload fade></core-image> -->
          <img class="middle profile" _src="{{service.user.profile}}" hidden$="{{_computeHidden(service)}}">
          <div class="bottom" layout vertical>
            <span>{{service.user.nickname}}</span>
            <span>{{service.user.email}}</span>
          </div>
        </paper-toolbar>

        <!-- Home -->
        <menu-home selectedsection="{{selected}}" projecthash="{{projectHash}}" hidden$="{{_computeHidden(menu)}}"></menu-home>
        <!-- Project -->
        <menu-project selectedsection="{{selected}}" projecthash="{{projectHash}}" hidden$="{{_computeHidden(menu)}}"></menu-project>
        <!-- Admin -->
        <menu-admin selectedsection="{{selected}}" projecthash="{{projectHash}}" hidden$="{{_computeHidden(menu)}}"></menu-admin>
      </paper-header-panel>

      <title-page hidden="true" tool projecthash="{{projectHash}}"></title-page><!-- bug: if this is not "preloaded" here than the title-page in e.g. page-category will not initPolymer (load; call domReady). -->
      <div id="title" tool flex>
        <content select=".title"></content>
      </div>
      <div fit main class="content">
        <content></content>
      </div>

      <dropdown-menu tool></dropdown-menu>
      <refresh-spinner></refresh-spinner>

    </core-scaffold>
  </template>

</dom-module>
