<link rel="import" href="../../../packages/polymer/polymer.html">
<link rel="import" href="../../../packages/polymer_elements/iron_icon.html">
<link rel="import" href="../../../packages/polymer_elements/paper_button.html">
<link rel="import" href="../../../packages/akepot/layouts/scaffold_layout.html">
<link rel="import" href="../../../packages/polymer_elements/iron_signals.html">
<link rel="import" href="../../../packages/polymer_elements/paper_dropdown_menu.html">
<link rel="import" href="../../../packages/polymer_elements/iron_dropdown.html">
<link rel="import" href="../../../packages/polymer_elements/iron_selector.html">
<link rel="import" href="../../../packages/polymer_elements/paper_item.html">
<link rel="import" href="../../../packages/polymer_elements/iron_flex_layout.html">

<dom-module id="pane-join">
  <style>
    /* TODO(polyup): For speed, consider reworking these styles with .classes
                     and #ids rather than [attributes].
    */
    [layout] {
      @apply(--layout);
    }
    [layout][horizontal] {
      @apply(--layout-horizontal);
    }
    [layout][wrap] {
      @apply(--layout-wrap);
    }
    [layout][center-justified] {
      @apply(--layout-center-justified);
    }
    [layout][vertical] {
      @apply(--layout-vertical);
    }
    [self-center] {
      @apply(--layout-self-center);
    }
    [fit] {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }
  </style>
  <link rel="import" type="css" href="pane_join.css">
  <template>

    <iron-signals on-core-signal-signedin="signedIn"></iron-signals>

    <div layout horizontal wrap center-justified cross-fade-delayed>
      <div id="card-join" self-center layout vertical>
        <div fit id="title-box">
          <div id="title">Join this project?</div>
        </div>
        <div id="title-box-substitute"></div>
        <template is="dom-if" if="{{service.signedIn}}">
          <div id="text-box">
            <p>Would you like to join this project?</p>
            <p>Team to be added to: </p>
            <paper-dropdown-menu label="Choose a team">
              <iron-dropdown class="dropdown">
                <iron-selector attr-for-selected="id" selected="{{selected}}">
                  <template is="dom-repeat" items="{{enumerate(service.project.teams)}}" as="team">
                    <paper-item id="{{team.index}}" undefined="{{team.value.name}}"></paper-item>
                  </template>
                </iron-selector>
              </iron-dropdown>
            </paper-dropdown-menu>
            <p>Select your roles: </p>
            <iron-selector attr-for-selected="id" selected="{{multiselected}}" multi="">
              <template is="dom-repeat" items="{{service.project.roles}}" as="role">
                <paper-item id="{{role.id}}" tabindex="0">
                  <iron-icon icon="assignment-ind"></iron-icon><span flex="">{{role.name}}</span>
                </paper-item>
              </template>
            </iron-selector>
          </div>
          <div flex=""></div><!-- active="false" -->
          <paper-button self-center id="join-button" disabled raised class="colored custom raised-button" autofocus tabindex="0">
            <iron-icon icon="add" aria-label="add" role="img"></iron-icon>
            Join project
          </paper-button>
        </template>
      </div>
    </div>
  </template>

</dom-module>

