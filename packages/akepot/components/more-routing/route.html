<script>(function(q){var m=q.MoreRouting=q.MoreRouting||{};m.Route=i;var b="/";var g=":";var p=/\/\/+/g;function i(r){this.path=r;this.compiled=this._compile(this.path);this.active=false;this.driver=null;this.parts=[];this.params={};this._paramObserver=new ObjectObserver(this.params);this._paramObserver.open(this._navigateToParams.bind(this))}i.isPath=function h(r){return r.indexOf(b)===0};i.joinPath=function d(t){var s=Array.prototype.join.call(arguments,b);s=s.replace(p,b);var r=s.length-b.length;if(s.substr(r)===b){s=s.substr(0,r)}return s};i.prototype.urlFor=function f(r){return this.driver.urlForParts(this.partsForParams(r))};i.prototype.navigateTo=function k(r){return this.driver.navigateToParts(this.partsForParams(r))};i.prototype.isCurrentUrl=function j(u){if(!this.active){return false}var t=Object.keys(this.params);for(var s=0,r;r=t[s];s++){if(this.params[r]!==String(u[r])){return false}}return true};i.prototype.partsForParams=function e(w,r){var v=[];for(var t=0,s;s=this.compiled[t];t++){if(s.type==="static"){v.push(s.part)}else{if(s.type==="param"){var u=w[s.name];if(u===undefined){if(r){return null}else{throw new Error('Missing param "'+s.name+'" for route '+this)}}v.push(u)}}}return v};i.prototype.processPathParts=function o(t){this.parts=t;this.active=this.matchesPathParts(t);for(var s=0,r;r=this.compiled[s];s++){if(r.type==="param"){this.params[r.name]=this.active?t[s]:undefined}}this._paramObserver.discardChanges()};i.prototype.matchesPathParts=function l(t){if(!t){return false}if(t.length<this.compiled.length){return false}for(var s=0,r;r=this.compiled[s];s++){if(r.type==="static"&&t[s]!==r.part){return false}}return true};i.prototype.toString=function c(){return this.path};i.prototype._compile=function n(r){if(r.indexOf(b)!==0){throw new Error('Route paths must begin with a path separator; got: "'+r+'"')}var s=r.substr(b.length);if(s===""){return[]}return s.split(b).map(function(t){if(t.substr(0,1)==g){return{type:"param",name:t.substr(1)}}else{return{type:"static",part:t}}})};i.prototype._navigateToParams=function a(){var r=this.partsForParams(this.params,true);if(!r){return}this.driver.navigateToParts(r)}})(window);</script>