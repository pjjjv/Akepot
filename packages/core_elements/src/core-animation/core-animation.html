<link rel=import href="../polymer/polymer.html"><link rel=import href="web-animations.html"><polymer-element name=core-animation constructor=CoreAnimation attributes="target keyframes customEffect composite duration fill easing iterationStart iterationCount delay direction autoplay targetSelector"><script>(function(){function a(c,b){return(b&&c==="Infinity")?Number.POSITIVE_INFINITY:Number(c)}Polymer({publish:{target:{value:null,reflect:true},keyframes:{value:null,reflect:true},customEffect:{value:null,reflect:true},composite:{value:"replace",reflect:true},duration:{value:"auto",reflect:true},fill:{value:"auto",reflect:true},easing:{value:"linear",reflect:true},delay:{value:0,reflect:true},endDelay:{value:0,reflect:true},iterations:{value:1,reflect:true},iterationStart:{value:0,reflect:true},iterationComposite:{value:"replace",reflect:true},direction:{value:"normal",reflect:true},playbackRate:{value:1,reflect:true},autoplay:{value:false,reflect:true}},animation:false,observe:{target:"apply",keyframes:"apply",customEffect:"apply",composite:"apply",duration:"apply",fill:"apply",easing:"apply",iterations:"apply",iterationStart:"apply",iterationComposite:"apply",delay:"apply",endDelay:"apply",direction:"apply",playbackRate:"apply",autoplay:"apply"},ready:function(){this.apply()},play:function(){this.apply();if(this.animation&&!this.autoplay){this.player=document.timeline.play(this.animation);this.player.onfinish=this.animationFinishHandler.bind(this);return this.player}},cancel:function(){if(this.player){this.player.cancel()}},finish:function(){if(this.player){this.player.finish()}},pause:function(){if(this.player){this.player.pause()}},hasTarget:function(){return this.target!==null},apply:function(){this.animation=this.makeAnimation();if(this.autoplay&&this.animation){this.play()}return this.animation},makeSingleAnimation:function(b){b.classList.add("core-animation-target");return new Animation(b,this.animationEffect,this.timingProps)},makeAnimation:function(){if(!this.target){return null}var b;if(Array.isArray(this.target)){var c=[];this.target.forEach(function(d){c.push(this.makeSingleAnimation(d))}.bind(this));b=new AnimationGroup(c)}else{b=this.makeSingleAnimation(this.target)}return b},animationChanged:function(){this.fire("core-animation-change",this)},targetChanged:function(b){if(b){b.classList.remove("core-animation-target")}},get timingProps(){var c={};var d={delay:{isNumber:true},endDelay:{isNumber:true},fill:{},iterationStart:{isNumber:true},iterations:{isNumber:true,allowInfinity:true},duration:{isNumber:true},playbackRate:{isNumber:true},direction:{},easing:{}};for(t in d){if(this[t]!==null){var b=d[t].property||t;c[b]=d[t].isNumber&&this[t]!=="auto"?a(this[t],d[t].allowInfinity):this[t]}}return c},get animationEffect(){var d={};var e=[];var c;if(this.keyframes){e=this.keyframes}else{if(!this.customEffect){var b=this.querySelectorAll("core-animation-keyframe");if(b.length===0&&this.shadowRoot){b=this.shadowRoot.querySelectorAll("core-animation-keyframe")}Array.prototype.forEach.call(b,function(f){e.push(f.properties)})}}if(this.customEffect){c=this.customEffect}else{c=e}return c},animationFinishHandler:function(){this.fire("core-animation-finish")}})})();</script></polymer-element><polymer-element name=core-animation-keyframe attributes=offset><script>Polymer({publish:{offset:{value:null,reflect:true}},get properties(){var b={};var a=this.querySelectorAll("core-animation-prop");Array.prototype.forEach.call(a,function(d){b[d.name]=d.value});if(this.offset!==null){b.offset=this.offset}return b}});</script></polymer-element><polymer-element name=core-animation-prop attributes="name value"><script>Polymer({publish:{name:{value:"",reflect:true},value:{value:"",reflect:true}}});</script></polymer-element>