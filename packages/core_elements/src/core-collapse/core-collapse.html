<link rel=import href="../polymer/polymer.html"><link rel=stylesheet href="core-collapse.css" shim-shadowdom><polymer-element name=core-collapse attributes="target horizontal opened duration fixedSize allowOverflow"><template><content></content></template><script>Polymer("core-collapse",{target:null,horizontal:false,opened:false,duration:0.33,fixedSize:false,allowOverflow:false,created:function(){this.transitionEndListener=this.transitionEnd.bind(this)},ready:function(){this.target=this.target||this},domReady:function(){this.async(function(){this.afterInitialUpdate=true})},detached:function(){if(this.target){this.removeListeners(this.target)}},targetChanged:function(a){if(a){this.removeListeners(a)}if(!this.target){return}this.isTargetReady=!!this.target;this.classList.toggle("core-collapse-closed",this.target!==this);this.toggleOpenedStyle(false);this.horizontalChanged();this.addListeners(this.target);this.toggleClosedClass(true);this.update()},addListeners:function(a){a.addEventListener("transitionend",this.transitionEndListener)},removeListeners:function(a){a.removeEventListener("transitionend",this.transitionEndListener)},horizontalChanged:function(){this.dimension=this.horizontal?"width":"height"},openedChanged:function(){this.update();this.fire("core-collapse-open",this.opened)},toggle:function(){this.opened=!this.opened},setTransitionDuration:function(b){var a=this.target.style;a.transition=b?(this.dimension+" "+b+"s"):null;if(b===0){this.async("transitionEnd")}},transitionEnd:function(){if(this.opened&&!this.fixedSize){this.updateSize("auto",null)}this.setTransitionDuration(null);this.toggleOpenedStyle(this.opened);this.toggleClosedClass(!this.opened);this.asyncFire("core-resize",null,this.target)},toggleClosedClass:function(a){this.hasClosedClass=a;this.target.classList.toggle("core-collapse-closed",a)},toggleOpenedStyle:function(a){this.target.style.overflow=this.allowOverflow&&a?"":"hidden"},updateSize:function(b,e,a){this.setTransitionDuration(e);this.calcSize();var c=this.target.style;var d=c[this.dimension]===b;c[this.dimension]=b;if(a&&d){this.transitionEnd()}},update:function(){if(!this.target){return}if(!this.isTargetReady){this.targetChanged()}this.horizontalChanged();this[this.opened?"show":"hide"]()},calcSize:function(){return this.target.getBoundingClientRect()[this.dimension]+"px"},getComputedSize:function(){return getComputedStyle(this.target)[this.dimension]},show:function(){this.toggleClosedClass(false);if(!this.afterInitialUpdate){this.transitionEnd();return}if(!this.fixedSize){this.updateSize("auto",null);var a=this.calcSize();if(a=="0px"){this.transitionEnd();return}this.updateSize(0,null)}this.async(function(){this.updateSize(this.size||a,this.duration,true)})},hide:function(){this.toggleOpenedStyle(false);if(this.hasClosedClass&&!this.fixedSize){return}if(this.fixedSize){this.size=this.getComputedSize()}else{this.updateSize(this.calcSize(),null)}this.async(function(){this.updateSize(0,this.duration)})}});</script></polymer-element>