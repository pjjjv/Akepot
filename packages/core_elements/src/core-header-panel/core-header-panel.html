<link rel=import href="../polymer/polymer.html"><polymer-element name=core-header-panel><template><link rel=stylesheet href="core-header-panel.css"><div id=outerContainer vertical layout><content id=headerContent select="core-toolbar, .core-header"></content><div id=mainPanel flex vertical layout><div id=mainContainer flex?="{{mode !==cover}}"><content id=mainContent select="*"></content></div><div id=dropShadow></div></div></div></template><script>Polymer({publish:{mode:{value:"",reflect:true},tallClass:"tall",shadow:false},animateDuration:200,modeConfigs:{shadowMode:{waterfall:1,"waterfall-tall":1},noShadow:{seamed:1,cover:1,scroll:1},tallMode:{"waterfall-tall":1},outerScroll:{scroll:1}},ready:function(){this.scrollHandler=this.scroll.bind(this);this.addListener()},detached:function(){this.removeListener(this.mode)},addListener:function(){this.scroller.addEventListener("scroll",this.scrollHandler)},removeListener:function(b){var a=this.getScrollerForMode(b);a.removeEventListener("scroll",this.scrollHandler)},domReady:function(){this.async("scroll")},modeChanged:function(a){var b=this.modeConfigs;var c=this.header;if(c){if(b.tallMode[a]&&!b.tallMode[this.mode]){c.classList.remove(this.tallClass);this.async(function(){c.classList.remove("animate")},null,this.animateDuration)}else{c.classList.toggle("animate",b.tallMode[this.mode])}}if(b&&(b.outerScroll[this.mode]||b.outerScroll[a])){this.removeListener(a);this.addListener()}this.scroll()},get header(){return this.$.headerContent.getDistributedNodes()[0]},getScrollerForMode:function(a){return this.modeConfigs.outerScroll[a]?this.$.outerContainer:this.$.mainContainer},get scroller(){return this.getScrollerForMode(this.mode)},scroll:function(){var d=this.modeConfigs;var b=this.$.mainContainer;var e=this.header;var a=b.scrollTop;var c=a===0;this.$.dropShadow.classList.toggle("hidden",!this.shadow&&(c&&d.shadowMode[this.mode]||d.noShadow[this.mode]));if(e&&d.tallMode[this.mode]){e.classList.toggle(this.tallClass,c||e.classList.contains(this.tallClass)&&b.scrollHeight<this.$.outerContainer.offsetHeight)}this.fire("scroll",{target:this.scroller},this,false)}});</script></polymer-element>