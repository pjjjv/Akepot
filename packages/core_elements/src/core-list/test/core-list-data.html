<!doctype html><html><head><title>core-list</title><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><script src="../../webcomponentsjs/webcomponents.js"></script><script src="../../web-component-tester/browser.js"></script><link rel=import href="../core-list.html"><style>body{margin:0;height:100%}core-list{display:block;height:100%;margin:0 auto}input{width:20px}.item{height:80px;background:lightblue}.item.selected{background:orange}</style></head><body fit><core-list id=list><template><div class="item {{ selected ? 'selected' : '' }}"><span id=index>{{index}}</span><br><span id=id>{{model.id}}</span><br><input id=checkbox type=checkbox checked"{{model.checked}}"><input id=input type=number _value="{{model.value}}" class=narrow><select id=select selectedIndex="{{model.type}}"><option>a</option><option>b</option><option>c</option></select></div></template></core-list><script>test("core-list-data",function(d){var f=document.querySelector("core-list");var c=80;var b=Math.ceil(f.offsetHeight/c);var e=0;var a=function(){return{id:Math.floor(Math.random()*10000),checked:!!Math.floor(Math.random()*2),value:Math.floor(Math.random()*10000),type:Math.floor(Math.random()*3)}};var g=function(j){var h=b*20;f.data=[];while(h--){f.data.push(a())}waitFor(function(){chai.assert(f.children.length>b+1,"children.length should be > "+b+" (1 template + max number of elements) after populating list");for(i=1;i<f.children.length-1;i++){chai.assert(f.children[i].getAttribute("hidden")===null,"all items should be visible after populating list; item "+i+" was hidden")}},j)};async.series([function(h){g(function(){f.children[1].listHasNotReRendered=true;f.data=null;waitFor(function(){chai.assert(f.children[1].listHasNotReRendered,"list should not re-render when setting list.data to null");chai.assert(f.children.length>b+1,"children.length should be > "+b+" (1 template + max number of elements");for(i=1;i<f.children.length-1;i++){chai.assert(f.children[i].getAttribute("hidden")!==null,"all items should be hidden after setting list.data to null; item "+i+" was not hidden")}},h)})},function(h){g(function(){f.data.splice(0,f.data.length);waitFor(function(){chai.assert(f.children[1].listHasNotReRendered,"list should not re-render when splicing all items from list.data");chai.assert(f.children.length>b+1,"children.length should be > "+b+" (1 template + max number of elements");for(i=1;i<f.children.length-1;i++){chai.assert(f.children[i].getAttribute("hidden")!==null,"all items should be hidden; item after splicing all items from list.data"+i+" was not hidden")}},h)})},function(h){g(function(){f.data=[];waitFor(function(){chai.assert(f.children[1].listHasNotReRendered,"list should not re-render when initializing list.data to []");chai.assert(f.children.length>b+1,"children.length should be > "+b+" (1 template + max number of elements");for(i=1;i<f.children.length-1;i++){chai.assert(f.children[i].getAttribute("hidden")!==null,"all items should be hidden; item after initializing list.data to []"+i+" was not hidden")}},h)})},function(h){f.data.push(a());waitFor(function(){chai.assert(f.children[1].listHasNotReRendered,"list should not re-render when adding items to list");chai.assert(f.children.length>b+1,"children.length should be > "+b+" (1 template + max number of elements");chai.assert(f.children[1].querySelector("#index").textContent=="0","first item index content should be "+e+" after adding item to list");chai.assert(f.children[1].querySelector("#id").textContent==f.data[0].id,"first item id content should be "+f.data[0].id+" after adding item to list");for(var j=1;j<f.children.length-1;j++){if(j<2){chai.assert(f.children[j].getAttribute("hidden")===null,"first 1 item should not be hidden after adding an item")}else{chai.assert(f.children[j].getAttribute("hidden")!==null,"remaining items should be hidden after adding an item")}}},h)},function(h){f.data.push(a());waitFor(function(){chai.assert(f.children[1].listHasNotReRendered,"list should not re-render when adding items to list");chai.assert(f.children.length>b+1,"children.length should be "+b+" (1 template + max number of elements");chai.assert(f.children[1].querySelector("#index").textContent=="0","first item index content should be 0 after adding item to list");chai.assert(f.children[1].querySelector("#id").textContent==f.data[0].id,"first item id content should be "+f.data[0].id+" after adding item to list");chai.assert(f.children[2].querySelector("#index").textContent=="1","second item index content should be 1 after adding item to list");chai.assert(f.children[2].querySelector("#id").textContent==f.data[1].id,"second item id content should be "+f.data[1].id+" after adding item to list");for(var j=1;j<f.children.length-1;j++){if(j<3){chai.assert(f.children[j].getAttribute("hidden")===null,"first 1 item should not be hidden after adding an item")}else{chai.assert(f.children[j].getAttribute("hidden")!==null,"remaining items should be hidden after adding an item")}}},h)}],d)});</script></body></html>