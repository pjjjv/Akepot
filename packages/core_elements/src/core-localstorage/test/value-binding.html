<!doctype html><html><head><meta charset=UTF-8><title>core-localstorage-value-binding</title><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><script src="../../webcomponentsjs/webcomponents.js"></script><script src="../../web-component-tester/browser.js"></script><link rel=import href="../core-localstorage.html"></head><body><polymer-element name=x-foo attributes=value noscript><template><div>{{value.foo}}</div></template></polymer-element><polymer-element name=x-test attributes=value noscript><template><x-foo value="{{value}}"></x-foo><core-localstorage id=localstorage name=core-localstorage-test value="{{value}}"></core-localstorage></template></polymer-element><x-test></x-test><script>window.localStorage.setItem("core-localstorage-test",'{"foo":"bar"}');var xtest=document.querySelector("x-test");suite("basic",function(){test("initial value",function(){assert.isNotNull(xtest.value);assert.equal(xtest.value.foo,"bar")});test("set value",function(a){var b={foo:"zot"};xtest.value=b;asyncPlatformFlush(function(){var c=window.localStorage.getItem(xtest.$.localstorage.name);c=JSON.parse(c);assert.equal(c.foo,b.foo);a()})});test("save",function(a){xtest.value.foo="quux";xtest.$.localstorage.save();asyncPlatformFlush(function(){var b=window.localStorage.getItem(xtest.$.localstorage.name);b=JSON.parse(b);assert.equal(b.foo,"quux");a()})})});</script></body></html>