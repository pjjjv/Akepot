<link rel=import href="../polymer/polymer.html"><polymer-element name=core-scroll-header-panel><template><link rel=stylesheet href="core-scroll-header-panel.css"><div id=mainContainer><content id=mainContent select=":not(core-toolbar):not(.core-header)"></content></div><div id=headerContainer><div class=bg-container><div id=condensedHeaderBg></div><div id=headerBg></div></div><content id=headerContent select="core-toolbar, .core-header"></content></div></template><script>(function(){Polymer("core-scroll-header-panel",{publish:{condenses:false,noDissolve:false,noReveal:false,fixed:false,keepCondensedHeader:false,headerHeight:0,condensedHeaderHeight:0,scrollAwayTopbar:false},prevScrollTop:0,headerMargin:0,y:0,observe:{"headerMargin fixed":"setup"},ready:function(){this._scrollHandler=this.scroll.bind(this);this.scroller.addEventListener("scroll",this._scrollHandler)},detached:function(){this.scroller.removeEventListener("scroll",this._scrollHandler)},domReady:function(){this.async("measureHeaderHeight")},get header(){return this.$.headerContent.getDistributedNodes()[0]},get scroller(){return this.$.mainContainer},measureHeaderHeight:function(){var b=this.header;if(b&&b.offsetHeight){this.headerHeight=b.offsetHeight}},headerHeightChanged:function(){if(!this.condensedHeaderHeight){this._condensedHeaderHeight=this.headerHeight*1/3}this.condensedHeaderHeightChanged()},condensedHeaderHeightChanged:function(){if(this.condensedHeaderHeight){this._condensedHeaderHeight=this.condensedHeaderHeight}if(this.headerHeight){this.headerMargin=this.headerHeight-this._condensedHeaderHeight}},condensesChanged:function(){if(this.condenses){this.scroll()}else{this.condenseHeader(null)}},setup:function(){var b=this.scroller.style;b.paddingTop=this.fixed?"":this.headerHeight+"px";b.top=this.fixed?this.headerHeight+"px":"";if(this.fixed){this.transformHeader(null)}else{this.scroll()}},transformHeader:function(c){var b=this.$.headerContainer.style;this.translateY(b,-c);if(this.condenses){this.condenseHeader(c)}this.fire("core-header-transform",{y:c,height:this.headerHeight,condensedHeight:this._condensedHeaderHeight})},condenseHeader:function(e){var d=e==null;if(!this.scrollAwayTopbar&&this.header.$&&this.header.$.topBar){this.translateY(this.header.$.topBar.style,d?null:Math.min(e,this.headerMargin))}var c=this.$.headerBg.style;if(!this.noDissolve){c.opacity=d?"":(this.headerMargin-e)/this.headerMargin}this.translateY(c,d?null:e/2);var b=this.$.condensedHeaderBg.style;if(!this.noDissolve){b=this.$.condensedHeaderBg.style;b.opacity=d?"":e/this.headerMargin;this.translateY(b,d?null:e/2)}},translateY:function(c,d){var b=d==null?"":"translate3d(0, "+d+"px, 0)";a(c,b)},scroll:function(c){if(!this.header){return}var b=this.scroller.scrollTop;var d=Math.min(this.keepCondensedHeader?this.headerMargin:this.headerHeight,Math.max(0,(this.noReveal?b:this.y+b-this.prevScrollTop)));if(this.condenses&&this.prevScrollTop>=b&&b>this.headerMargin){d=Math.max(d,this.headerMargin)}if(!c||!this.fixed&&d!==this.y){this.transformHeader(d)}this.prevScrollTop=Math.max(b,0);this.y=d;if(c){this.fire("scroll",{target:this.scroller},this,false)}}});if(document.documentElement.style.transform!==undefined){var a=function(c,b){c.transform=b}}else{var a=function(c,b){c.webkitTransform=b}}})();</script></polymer-element>