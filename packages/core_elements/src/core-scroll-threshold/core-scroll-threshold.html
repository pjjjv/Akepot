<link rel=import href="../polymer/polymer.html"><polymer-element name=core-scroll-threshold><script>Polymer({publish:{scrollTarget:null,orient:"v",upperThreshold:null,lowerThreshold:null,upperTriggered:false,lowerTriggered:false},observe:{"upperThreshold lowerThreshold scrollTarget orient":"setup"},ready:function(){this._boundScrollHandler=this.checkThreshold.bind(this)},setup:function(){if(this._scrollTarget&&(this._scrollTarget!=this.target)){this._scrollTarget.removeEventListener(this._boundScrollHandler)}var a=this.scrollTarget||this;if(a){this._scrollTarget=a;this._scrollTarget.addEventListener("scroll",this._boundScrollHandler)}this.style.overflow=(a==this)?"auto":null;this.scrollPosition=(this.orient=="v")?"scrollTop":"scrollLeft";this.sizeExtent=(this.orient=="v")?"offsetHeight":"offsetWidth";this.scrollExtent=(this.orient=="v")?"scrollHeight":"scrollWidth";if(!this.upperThreshold){this.upperTriggered=false}if(!this.lowerThreshold){this.lowerTriggered=false}},checkThreshold:function(d){var c=this._scrollTarget[this.scrollPosition];if(!this.upperTriggered&&this.upperThreshold!=null){if(c<this.upperThreshold){this.upperTriggered=true;this.fire("upper-trigger")}}if(this.lowerThreshold!=null){var a=c+this._scrollTarget[this.sizeExtent];var b=this._scrollTarget[this.scrollExtent];if(!this.lowerTriggered&&(b-a)<this.lowerThreshold){this.lowerTriggered=true;this.fire("lower-trigger")}}},clearUpper:function(a){if(a){this._waitForMutation(function(){this.clearUpper()}.bind(this))}else{requestAnimationFrame(function(){this.upperTriggered=false}.bind(this))}},clearLower:function(a){if(a){this._waitForMutation(function(){this.clearLower()}.bind(this))}else{requestAnimationFrame(function(){this.lowerTriggered=false}.bind(this))}},_waitForMutation:function(b){var a=new MutationObserver(function(c){b.call(this,a,c);a.disconnect()}.bind(this));a.observe(this._scrollTarget,{attributes:true,childList:true,subtree:true})}});</script></polymer-element>