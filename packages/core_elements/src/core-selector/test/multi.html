<!doctype html><html><head><meta charset=UTF-8><title>core-selector-multi</title><script src="../../webcomponentsjs/webcomponents.js"></script><script src="../../web-component-tester/browser.js"></script><link rel=import href="../core-selector.html"><style>.core-selected{background:#ccc}</style></head><body><core-selector id=selector multi><div>Item 1</div><div>Item 2</div><div>Item 3</div><div>Item 4</div><div>Item 5</div></core-selector><script>var s=document.querySelector("#selector");suite("multi",function(){test("honors the multi attribute",function(){assert.isTrue(s.multi)});test("has sane defaults",function(){assert.equal(s.selected,null);assert.equal(s.selectedClass,"core-selected");assert.equal(s.valueattr,"name");assert.equal(s.items.length,5)});test("allows multi-selection",function(a){var b=0;s.addEventListener("core-select",function(c){if(c.detail.isSelected){b++}else{b--}});s.selected=[0,2];asyncPlatformFlush(function(){assert.equal(b,2);assert.isTrue(s.children[0].classList.contains("core-selected"));assert.isTrue(s.children[2].classList.contains("core-selected"));assert.equal(s.selectedItem.length,2);assert.equal(s.selectedItem[0],s.children[0]);assert.equal(s.selectedItem[1],s.children[2]);s.children[0].dispatchEvent(new CustomEvent("tap",{bubbles:true}));assert.equal(s.selected.length,1);asyncPlatformFlush(function(){assert.equal(b,1);assert.isFalse(s.children[0].classList.contains("core-selected"));s.selected.push(3);s.selected.push(4);asyncPlatformFlush(function(){assert.equal(b,3);a()})})})});test("toggle multi to false",function(a){s.selected=[0,2];var b=s.selected[0];s.multi=false;asyncPlatformFlush(function(){assert.isNotArray(s.selected);assert.equal(s.selected,b);a()})})});</script></body></html>