<link rel=import href="../polymer/polymer.html"><polymer-element name=core-style hidden><script>(function(){window.CoreStyle=window.CoreStyle||{g:{},list:{},refMap:{}};Polymer("core-style",{publish:{ref:""},g:CoreStyle.g,refMap:CoreStyle.refMap,list:CoreStyle.list,ready:function(){if(this.id){this.provide()}else{this.registerRef(this.ref);if(!window.ShadowDOMPolyfill){this.require()}}},attached:function(){if(!this.id&&window.ShadowDOMPolyfill){this.require()}},provide:function(){this.register();if(this.textContent){this._completeProvide()}else{this.async(this._completeProvide)}},register:function(){var a=this.list[this.id];if(a){if(!Array.isArray(a)){this.list[this.id]=[a]}this.list[this.id].push(this)}else{this.list[this.id]=this}},_completeProvide:function(){this.createShadowRoot();this.domObserver=new MutationObserver(this.domModified.bind(this)).observe(this.shadowRoot,{subtree:true,characterData:true,childList:true});this.provideContent()},provideContent:function(){this.ensureTemplate();this.shadowRoot.textContent="";this.shadowRoot.appendChild(this.instanceTemplate(this.template));this.cssText=this.shadowRoot.textContent},ensureTemplate:function(){if(!this.template){this.template=this.querySelector("template:not([repeat]):not([bind])");if(!this.template){this.template=document.createElement("template");var a=this.firstChild;while(a){this.template.content.appendChild(a.cloneNode(true));a=a.nextSibling}}}},domModified:function(){this.cssText=this.shadowRoot.textContent;this.notify()},notify:function(){var c=this.refMap[this.id];if(c){for(var a=0,b;(b=c[a]);a++){b.require()}}},registerRef:function(a){this.refMap[this.ref]=this.refMap[this.ref]||[];this.refMap[this.ref].push(this)},applyRef:function(a){this.ref=a;this.registerRef(this.ref);this.require()},require:function(){var a=this.cssTextForRef(this.ref);if(a){this.ensureStyleElement();if(this.styleElement._cssText===a){return}this.styleElement._cssText=a;if(window.ShadowDOMPolyfill){this.styleElement.textContent=a;a=WebComponents.ShadowCSS.shimStyle(this.styleElement,this.getScopeSelector())}this.styleElement.textContent=a}},cssTextForRef:function(f){var e=this.byId(f);var d="";if(e){if(Array.isArray(e)){var g=[];for(var b=0,a=e.length,c;(b<a)&&(c=e[b]);b++){g.push(c.cssText)}d=g.join("\n\n")}else{d=e.cssText}}if(e&&!d){console.warn("No styles provided for ref:",f)}return d},byId:function(a){return this.list[a]},ensureStyleElement:function(){if(!this.styleElement){this.styleElement=window.ShadowDOMPolyfill?this.makeShimStyle():this.makeRootStyle()}if(!this.styleElement){console.warn(this.localName,"could not setup style.")}},makeRootStyle:function(){var a=document.createElement("style");this.appendChild(a);return a},makeShimStyle:function(){var c=this.findHost(this);if(c){var a=c.localName;var b=document.querySelector("style["+a+"="+this.ref+"]");if(!b){b=document.createElement("style");b.setAttribute(a,this.ref);document.head.appendChild(b)}return b}},getScopeSelector:function(){if(!this._scopeSelector){var a="",c=this.findHost(this);if(c){var d=c.hasAttribute("is");var b=d?c.getAttribute("is"):c.localName;a=WebComponents.ShadowCSS.makeScopeSelector(b,d)}this._scopeSelector=a}return this._scopeSelector},findHost:function(a){while(a.parentNode){a=a.parentNode}return a.host||wrap(document.documentElement)},cycle:function(b,c){if(b.match("#")){var d=this.hexToRgb(b);if(!d){return b}b="rgb("+d.r+","+d.b+","+d.g+")"}function a(e){return Math.abs((Number(e)-c)%255)}return b.replace(/rgb\(([^,]*),([^,]*),([^,]*)\)/,function(f,g,e,h){return"rgb("+a(g)+","+a(e)+", "+a(h)+")"})},hexToRgb:function(b){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}})})();</script></polymer-element>