<link href="../polymer/polymer.html" rel=import><link href="../core-icon/core-icon.html" rel=import><link href="../core-icons/core-icons.html" rel=import><link href="../core-input/core-input.html" rel=import><link href="../core-style/core-style.html" rel=import><core-style id=paper-input-decorator> .label-text, .error { color: {{g.paperInput.labelColor}}; } ::-webkit-input-placeholder { color: {{g.paperInput.labelColor}}; } ::-moz-placeholder { color: {{g.paperInput.labelColor}}; } :-ms-input-placeholder { color: {{g.paperInput.labelColor}}; } .unfocused-underline { background-color: {{g.paperInput.labelColor}}; } :host([focused]) .floated-label .label-text { color: {{g.paperInput.focusedColor}}; } .focused-underline { background-color: {{g.paperInput.focusedColor}}; } .cursor { background-color: {{g.paperInput.cursorColor}}; } :host(.invalid) .floated-label .label-text, .error { color: {{g.paperInput.invalidColor}}; } :host(.invalid) .unfocused-underline, :host(.invalid) .focused-underline, :host(.invalid) .cursor { background-color: {{g.paperInput.invalidColor}}; } </core-style><polymer-element name=paper-input-decorator layout vertical on-transitionEnd="{{transitionEndAction}}" on-webkitTransitionEnd="{{transitionEndAction}}" on-input="{{inputAction}}" on-down="{{downAction}}"><template><link href="paper-input-decorator.css" rel=stylesheet><core-style ref=paper-input-decorator></core-style><div class=floated-label aria-hidden=true hidden?="{{!floatingLabel}}" invisible?="{{!floatingLabelVisible || labelAnimated}}"><span id=floatedLabelText class=label-text>{{label}}</span></div><div class=input-body flex auto relative><div class=label fit invisible aria-hidden=true><span id=labelText class=label-text invisible?="{{!_labelVisible}}" animated?="{{labelAnimated}}">{{label}}</span></div><div class=cursor invisible?="{{!cursorAnimated}}" animated?="{{cursorAnimated}}"></div><content></content></div><div id=underline class=underline relative><div class=unfocused-underline fit invisible?="{{disabled}}"></div><div id=focusedUnderline class=focused-underline fit invisible?="{{!focused}}" animated?="{{underlineAnimated}}"></div></div><div class=error layout horizontal center hidden?="{{!isInvalid}}"><div class=error-text flex auto role=alert aria-hidden="{{!isInvalid}}">{{error}}</div><core-icon class=error-icon icon=warning></core-icon></div></template><script>(function(){var a=CoreStyle.g.paperInput=CoreStyle.g.paperInput||{};a.labelColor="#757575";a.cursorColor="#4059a9";a.focusedColor="#4059a9";a.invalidColor="#d34336";Polymer({publish:{label:"",floatingLabel:false,disabled:{value:false,reflect:true},labelVisible:null,isInvalid:false,error:"",focused:{value:false,reflect:true}},computed:{floatingLabelVisible:"floatingLabel && !_labelVisible",_labelVisible:"(labelVisible === true || labelVisible === false) ? labelVisible : _autoLabelVisible"},ready:function(){Polymer.addEventListener(this,"focus",this.focusAction.bind(this),true);Polymer.addEventListener(this,"blur",this.blurAction.bind(this),true)},attached:function(){this.input=this.querySelector("input,textarea");this.mo=new MutationObserver(function(){this.input=this.querySelector("input,textarea")}.bind(this));this.mo.observe(this,{childList:true})},detached:function(){this.mo.disconnect();this.mo=null},prepareLabelTransform:function(){var b=this.$.floatedLabelText.getBoundingClientRect();var c=this.$.labelText.getBoundingClientRect();if(b.width!==0){var d=b.height/c.height;this.$.labelText.cachedTransform="scale3d("+(b.width/c.width)+","+d+",1) translate3d(0,"+(b.top-c.top)/d+"px,0)"}},animateFloatingLabel:function(){if(!this.floatingLabel||this.labelAnimated){return}if(!this.$.labelText.cachedTransform){this.prepareLabelTransform()}if(!this.$.labelText.cachedTransform){return}this.labelAnimated=true;this.async(function(){this.transitionEndAction()},null,250);if(this._labelVisible){if(!this.$.labelText.style.webkitTransform&&!this.$.labelText.style.transform){this.$.labelText.style.webkitTransform=this.$.labelText.cachedTransform;this.$.labelText.style.transform=this.$.labelText.cachedTransform;this.$.labelText.offsetTop}this.$.labelText.style.webkitTransform="";this.$.labelText.style.transform=""}else{this.$.labelText.style.webkitTransform=this.$.labelText.cachedTransform;this.$.labelText.style.transform=this.$.labelText.cachedTransform;this.input.placeholder=""}},_labelVisibleChanged:function(b){if(b!==undefined){this.animateFloatingLabel()}},labelChanged:function(){if(this.input){this.updateInputLabel(this.input,this.label)}},isInvalidChanged:function(){this.classList.toggle("invalid",this.isInvalid)},focusedChanged:function(){this.updateLabelVisibility(this.input&&this.input.value)},inputChanged:function(b){if(this.input){this.updateLabelVisibility(this.input.value);this.updateInputLabel(this.input,this.label)}if(b){this.updateInputLabel(b,"")}},focusAction:function(){this.focused=true},blurAction:function(b){this.focused=false},updateLabelVisibility:function(c){var b=(c!==null&&c!==undefined)?String(c):c;this._autoLabelVisible=(!this.focused&&!b)||(!this.floatingLabel&&!b)},updateInputLabel:function(b,c){if(this._labelVisible){this.input.placeholder=this.label}else{this.input.placeholder=""}if(c){b.setAttribute("aria-label",c)}else{b.removeAttribute("aria-label")}},inputAction:function(b){this.updateLabelVisibility(b.target.value)},downAction:function(d){if(this.disabled){return}if(this.focused){return}if(this.input){this.input.focus();d.preventDefault()}var c=this.$.underline.getBoundingClientRect();var b=d.x-c.left;this.$.focusedUnderline.style.mozTransformOrigin=b+"px";this.$.focusedUnderline.style.webkitTransformOrigin=b+"px ";this.$.focusedUnderline.style.transformOriginX=b+"px";this.underlineAnimated=true;if(this._labelVisible){this.cursorAnimated=true}this.async(function(){this.transitionEndAction()},null,250)},transitionEndAction:function(){this.underlineAnimated=false;this.cursorAnimated=false;this.labelAnimated=false;if(this._labelVisible){this.input.placeholder=this.label}}})}());</script></polymer-element>