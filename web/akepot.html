<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#303F9F">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style"
          content="black-translucent" >
    <meta name="format-detection" content="telephone=no">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="icon" sizes="96x96" href="icons/icon-96.png">
    <meta name="application-name" content="Akepot">

    <title>Akepot</title>
    <link rel="stylesheet" href="styles.css">
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,500,400italic,300italic,500italic' rel='stylesheet' type='text/css'>

    <!--<script src="packages/web_components/platform.js"></script>
    <script src="packages/web_components/dart_support.js"></script>-->

    <link rel="import" href="packages/polymer/polymer.html">
    <link rel="import" href="packages/core_elements/core_scaffold.html">
    <link rel="import" href="packages/core_elements/core_header_panel.html">
    <link rel="import" href="packages/core_elements/core_menu.html">
    <link rel="import" href="packages/core_elements/core_item.html">
    <link rel="import" href="packages/core_elements/core_icon_button.html">
    <link rel="import" href="packages/core_elements/core_toolbar.html">
    <link rel="import" href="packages/core_elements/core_submenu.html">
    <link rel="import" href="packages/core_elements/core_field.html">
    <link rel="import" href="packages/core_elements/core_icon.html">
    <link rel="import" href="packages/core_elements/core_input.html">
    <link rel="import" href="packages/core_elements/core_icons.html">
    <link rel="import" href="packages/core_elements/core_icon_button.html">
    <link rel="import" href="packages/core_elements/core_animated_pages.html">
    <link rel="import" href="packages/core_elements/core_image.html">
    <link rel="import" href="packages/paper_elements/paper_button.html">
    <link rel="import" href="packages/paper_elements/paper_item.html">
    <link rel="import" href="packages/paper_elements/paper_input.html">
    <link rel="import" href="packages/paper_elements/paper_input_decorator.html">
    <link rel="import" href="packages/paper_elements/paper_autogrow_textarea.html">
    <link rel="import" href="packages/paper_elements/paper_dialog.html">
    <link rel="import" href="packages/paper_elements/paper_dialog_transition.html"><!-- https://github.com/Polymer/paper-dialog/issues/32 -->
    <link rel="import" href="packages/akepot/category_pane.html">
    <link rel="import" href="packages/akepot/top_left.html">
    <link rel="import" href="packages/akepot/core_card2.html">
    <link rel="import" href="packages/akepot/components/more-routing/more-routing.html">
    <link rel="import" href="packages/akepot/components/more-routing/more-route.html">
    <link rel="import" href="packages/akepot/components/more-routing/more-route-selector.html">
    <link rel="import" href="packages/akepot/components/more-routing/more-route-switch.html">
    <link rel="import" href="packages/akepot/components/more-routing/routing.html">
    <link rel="import" href="packages/akepot/competences_service.html">
  </head>
<!-- http://localhost:8080/akepot.html#!/project/bla -->
  <body unresolved fullbleed touch-action="auto">
  <more-routing driver="hash"></more-routing>

    <template is="auto-binding-dart" id="content">
    <more-route path="/admin/:projectHash" params="{{adminRoute}}" name="adminRoute" id="adminRoute"></more-route>
    <more-route path="/project/:projectHash" params="{{projectRoute}}" name="projectRoute" id="projectRoute"></more-route>

    <competences-service id="service" categories="{{categories}}"></competences-service>
    <core-scaffold id="core_scaffold" mode="waterfall-tall">
      <core-header-panel mode="waterfall-tall" id="core_header_panel" navigation flex>
        <core-toolbar id="panel-head" class="core-header" on-tap="{{goTo}}" href="/"><top-left></top-left></core-toolbar>
        <core-menu on-tap="{{goTo}}" flex id="panel-list1" class="content" selected="Document Management" valueattr="label" selectedindex="1" theme="core-light-theme">
        </core-menu>

        <!-- Home -->
        <template if="{{ projectRoute['projectHash'] == null && adminRoute['projectHash'] == null }}">
            <core-selector flex id="panel-list2" class="content" valueattr="label" selected="Home" theme="core-light-theme">
              <paper-item href="/" id="menu_item_home" horizontal center layout>
                <core-icon icon="home"></core-icon>
                Home
              </paper-item>
            </core-selector>
        </template>

        <!-- Project -->
        <template if="{{ projectRoute['projectHash'] != null }}">
          <core-selector flex id="panel-list2" class="content" selected="2" theme="core-light-theme">
            <paper-item href="/" id="menu_item_home" horizontal center layout>
              <core-icon icon="home"></core-icon>
              Home
            </paper-item>
            <template repeat="{{category in categories}}">
              <paper-item href="/booking" id="menu_item1" horizontal center layout>
                <core-icon icon="assignment-ind"></core-icon>
                {{category.name}}
              </paper-item>
            </template>
          </core-selector>

          <core-field id="search_field" icon="search" theme="core-light-theme" center horizontal layout>
            <core-icon icon="search" id="search_icon"></core-icon>
            <input is="core-input" willvalidate placeholder="Search for a competency" id="core_input" flex/>
          </core-field>
        </template>

        <!-- Admin -->
        <template if="{{ adminRoute['projectHash'] != null }}">
            <core-selector flex id="panel-list2" class="content" valueattr="name" selected="{{selectedSection}}" theme="core-light-theme">
              <paper-item href="/" id="menu_item_home" name="splash">
                <core-icon icon="home"></core-icon>
                Home
              </paper-item>
              <paper-item href="/" id="menu_item_input" name="input">
                <core-icon icon="input"></core-icon>
                Input
              </paper-item>
              <paper-item href="/" id="menu_item_output" name="output">
                <core-icon icon="output"></core-icon>
                Output
              </paper-item>
            </core-selector>
        </template>

      </core-header-panel>


      <div id="title" tool flex>Competence Matrix
        <!-- Project -->
        <template if="{{ projectRoute['projectHash'] != null }}">
          for {{projectRoute['projectHash']}}
        </template>
        <!-- Admin -->
        <template if="{{ adminRoute['projectHash'] != null && project != null }}">
          Admin for {{project.name}}
        </template>
      </div>
      <core-icon-button icon="search" tool></core-icon-button>


      <core-animated-pages fit main selected="{{selectedSection}}" transitions="cross-fade cross-fade-delayed scale-up slide-up slide-up-offscreen slide-down tile-cascade hero-transition" flex="" auto="" notap="" class="">

        <!--<topeka-profile id="profile" name="profile" user="John" wide="100px" center="" layout="" vertical="" class="core-selected" active="">
        </topeka-profile>-->

        <!-- Home -->
        <template if="{{ projectRoute['projectHash'] == null && adminRoute['projectHash'] == null }}">
          <section name="splash">
            <span fit class="splash wide" cross-fade></span>
          </section>
          <section name="home">
            <div layout horizontal wrap center-justified>
              <div id="card-new" self-center layout vertical>
                <div fit id="title-box">
                  <div id="title">New project</div>
                </div>
                <div id="title-box-substitute"></div>
                <div id="text-box">
                  Create a new project and administrate it for your teams.
                </div>
                <div flex></div>
                <paper-button hidden self-center id="new-button" raised class="colored custom" role="button" tabindex="0">
                  <core-icon icon="create" aria-label="create" role="img"></core-icon>
                  Create project
                </paper-button>
              </div>
              <div id="card-link" self-center layout vertical>
                <div fit id="title-box">
                  <div id="title">... or use link</div>
                </div>
                <div id="title-box-substitute"></div>
                <div id="text-box">
                  If you just want to fill in your competences as a user, ask your administrator for the deep link to your project.
                </div>
                <div flex></div>
              </div>
            </div>
          </section>
        </template>

        <!-- Admin -->
        <template if="{{ adminRoute['projectHash'] != null }}">
          <section name="splash">
            <span fit class="splash wide" cross-fade></span>
          </section>
          <section name="input" vertical layout>

            <paper-input label="Project name" floatingLabel error="Project name is required!" required value="{{project.name}}"></paper-input>
            <paper-input-decorator label="Description" floatingLabel>
              <paper-autogrow-textarea>
                <textarea></textarea>
              </paper-autogrow-textarea>
            </paper-input-decorator>
            <paper-input-decorator label="Categories, sub-categories and competences (as JSON)" floatingLabel error="One category, sub-category and competence is required!">
              <paper-autogrow-textarea id="textareaCategories" rows="10" maxRows="10">
                <textarea required value="{{project.categoriesAsJson}}"></textarea>
              </paper-autogrow-textarea>
            </paper-input-decorator>
            <paper-input-decorator label="Teams (as JSON)" floatingLabel error="One team is required!">
              <paper-autogrow-textarea id="textareaTeams" rows="10">
                <textarea required>{{project.teams}}</textarea>
              </paper-autogrow-textarea>
            </paper-input-decorator>
            <paper-button hidden self-center id="create-button" raised class="colored custom" role="button" tabindex="0">
              <core-icon icon="create" aria-label="create" role="img"></core-icon>
              Create project
            </paper-button>
          </section>
          <section name="output" vertical layout>

          </section>
        </template>

        <!-- Project -->
        <template if="{{ projectRoute['projectHash'] != null }}">
          <section name="splash">
            <span fit class="splash wide" cross-fade></span>
          </section>
          <template repeat="{{category in categories}}">
            <section name="{{category.name}}" id="{{category.name}}" vertical layout>
              <category-pane id="list1" subcategories="{{category.subcategories}}" cross-fade></category-pane>
            </section>
          </template>
        </template>

      </core-animated-pages>



      <paper-dialog id="dialog" heading="Info on Akepot"
        transition="paper-transition-center" backdrop="true">
        <p>Made with Polymer and Dart in October 2014.</p>
        <p>This tool was created by pjv.</p>
        <paper-button dismissive autofocus>Close</paper-button>
      </paper-dialog>
    </core-scaffold>
    </template>


    <script src="main.dart" type="application/dart"></script>
    <!--Not if own main: <script type="application/dart">export 'package:polymer/init.dart';</script>-->
    <script src="packages/browser/dart.js"></script>
  </body>
</html>
