<!DOCTYPE html>

<html ><!--manifest="appcache.mf"-->
  <head>
    <meta charset="utf-8">
    <meta name="theme-color" content="#303F9F">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="#2196F3">
    <meta name="theme-color" content="#2196F3">
    <meta name="msapplication-TileColor" content="#2196F3">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="format-detection" content="telephone=no">
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="icon" sizes="196x196" href="icons/icon-196.png">
    <link rel="manifest" href="manifest.json">
    <meta name="application-name" content="Akepot">

    <title>CompetenceMatrix</title>
    <link rel="stylesheet" href="styles.css">
    <link href='//fonts.googleapis.com/css?family=RobotoDraft:400,300,500' rel='stylesheet' type='text/css'>
    <!--<link href='//fonts.googleapis.com/css?family=Roboto:400italic,300italic,500italic' rel='stylesheet' type='text/css'>-->

    <!--<script src="packages/web_components/platform.js"></script>
    <script src="packages/web_components/dart_support.js"></script>-->

    <link rel="import" href="packages/polymer/polymer.html">
    <link rel="import" href="packages/core_elements/core_scaffold.html">
    <link rel="import" href="packages/core_elements/core_header_panel.html">
    <link rel="import" href="packages/core_elements/core_menu.html">
    <link rel="import" href="packages/core_elements/core_menu_button.html">
    <link rel="import" href="packages/core_elements/core_item.html">
    <link rel="import" href="packages/core_elements/core_icon_button.html">
    <link rel="import" href="packages/core_elements/core_toolbar.html">
    <link rel="import" href="packages/core_elements/core_submenu.html">
    <link rel="import" href="packages/core_elements/core_field.html">
    <link rel="import" href="packages/core_elements/core_icon.html">
    <link rel="import" href="packages/core_elements/core_input.html">
    <link rel="import" href="packages/core_elements/core_icons.html">
    <link rel="import" href="packages/core_elements/core_icon_button.html">
    <link rel="import" href="packages/core_elements/core_animated_pages.html">
    <link rel="import" href="packages/core_elements/core_image.html">
    <link rel="import" href="packages/paper_elements/paper_button.html">
    <link rel="import" href="packages/paper_elements/paper_toast.html">
    <link rel="import" href="packages/paper_elements/paper_item.html">
    <link rel="import" href="packages/paper_elements/paper_input.html">
    <link rel="import" href="packages/paper_elements/paper_input_decorator.html">
    <link rel="import" href="packages/paper_elements/paper_autogrow_textarea.html">
    <link rel="import" href="packages/paper_elements/paper_dialog.html">
    <link rel="import" href="packages/paper_elements/paper_spinner.html">
    <link rel="import" href="packages/paper_elements/paper_dropdown.html">
    <link rel="import" href="packages/paper_elements/paper_action_dialog.html">
    <link rel="import" href="packages/paper_elements/paper_dialog_transition.html"><!-- https://github.com/Polymer/paper-dialog/issues/32 -->
    <link rel="import" href="packages/akepot/category_pane.html">
    <link rel="import" href="packages/akepot/login_screen.html">
    <link rel="import" href="packages/akepot/core_card2.html">
    <link rel="import" href="packages/akepot/menu_admin.html">
    <link rel="import" href="packages/akepot/menu_projects.html">
    <link rel="import" href="packages/akepot/menu_home.html">
    <link rel="import" href="packages/akepot/pane_home.html">
    <link rel="import" href="packages/akepot/pane_input.html">
    <link rel="import" href="packages/akepot/pane_join.html">
    <link rel="import" href="packages/akepot/components/more-routing/more-routing.html">
    <link rel="import" href="packages/akepot/components/more-routing/more-route.html">
    <link rel="import" href="packages/akepot/components/more-routing/more-route-selector.html">
    <link rel="import" href="packages/akepot/components/more-routing/more-route-switch.html">
    <link rel="import" href="packages/akepot/components/more-routing/routing.html">
    <link rel="import" href="packages/akepot/competences_service.html">

    <script>
    var _prum = [['id', '54a6a6c7abe53d46185cc65d'],
                 ['mark', 'firstbyte', (new Date()).getTime()]];
    (function() {
        var s = document.getElementsByTagName('script')[0]
          , p = document.createElement('script');
        p.async = 'async';
        p.src = '//rum-static.pingdom.net/prum.min.js';
        s.parentNode.insertBefore(p, s);
    })();
    </script>
    <meta name="blitz" content="mu-945e2684-1e7d011f-6be36044-cab4553c">
  </head>
<!-- http://localhost:8080/akepot.html#!/project/bla -->
  <body unresolved fullbleed touch-action="auto">
  <div id="cmdebug" hidden></div>
  <more-routing driver="hash"></more-routing>

    <template is="auto-binding-dart" id="content">
    <login-screen id="loginscreen" layout vertical center-center fit
      class="{{signedin ? '' : 'show'}}"></login-screen>

    <more-route path="/admin/:projectHash" params="{{adminRoute}}" name="adminRoute" id="adminRoute"></more-route>
    <more-route path="/project/:projectHash" params="{{projectRoute}}" name="projectRoute" id="projectRoute"></more-route>

    <competences-service id="service" user="{{user}}" signedin="{{signedin}}" categories="{{categories}}" hash="{{projectHash}}" newlink="{{newlink}}" newuser="{{newuser}}"></competences-service>
    <core-scaffold id="core_scaffold" mode="waterfall-tall">
      <core-header-panel mode="scroll" id="core_header_panel" navigation flex>
        <core-toolbar id="panel-head" class="core-header tall">
          <!-- <core-image src="{{user.cover}}" sizing="cover" preload fade></core-image> -->
          <img class="middle profile" _src="{{user.profile}}" hidden?="{{user.profile == null}}">
          <div class="bottom" layout vertical>
            <span>{{user.nickname}}</span>
            <span>{{user.email}}</span>
          </div>
        </core-toolbar>
        <core-menu flex id="panel-list" class="content" theme="core-light-theme" selectedAttribute="">

          <!-- Home -->
          <template if="{{ projectRoute['projectHash'] == null && adminRoute['projectHash'] == null }}">
            <menu-home selectedSection="{{selectedSection}}"></menu-home>
          </template>

          <!-- Project -->
          <template if="{{ projectRoute['projectHash'] != null }}">
            <menu-projects selectedSection="{{selectedSection}}" categories="{{categories}}"></menu-projects>
          </template>

          <!-- Admin -->
          <template if="{{ adminRoute['projectHash'] != null }}">
            <menu-admin selectedSection="{{selectedSection}}"></menu-admin>
          </template>
        </core-menu>

      </core-header-panel>

      <div id="title" tool flex>Competence Matrix
        <!-- Project -->
        <template if="{{ projectRoute['projectHash'] != null }}">
          for {{projectRoute['projectHash']}}
        </template>
        <!-- Admin -->
        <template if="{{ adminRoute['projectHash'] != null && project != null }}">
          Admin for {{project.name}}
        </template>
      </div>

      <core-menu-button class="selected-item" layout horizontal tool><!-- Outline comes from a11y https://github.com/Polymer/core-menu-button/issues/15 -->
        <core-icon-button icon="more-vert"></core-icon-button>
        <paper-dropdown class="dropdown" halign="right" valign="top">
          <paper-item id="menu_item_about" name="about" tabindex="0" on-tap="{{about}}">
            <core-icon icon="info"></core-icon>
            <span flex>About</span>
          </paper-item>
          <paper-item id="menu_item_signout" name="signout" tabindex="0" on-tap="{{signOut}}">
            <core-icon icon="close"></core-icon>
            <span flex>Sign out</span>
          </paper-item>
        </paper-dropdown>
      </core-menu-button>

      <div id="refresh" class="bottom fit" layout horizontal center-center on-transitionend="{{onRefreshTransitionEnd}}">
        <div class="paper-shadow-bottom-z-1">
          <paper-spinner id="refreshspinner"></paper-spinner>
        </div>
      </div>

      <core-animated-pages fit main selected="{{selectedSection}}" transitions="cross-fade cross-fade-delayed scale-up slide-up slide-up-offscreen slide-down tile-cascade hero-transition" flex="" auto="" notap="" class="">

        <!--<topeka-profile id="profile" name="profile" user="John" wide="100px" center="" layout="" vertical="" class="core-selected" active="">
        </topeka-profile>-->

        <!-- Home -->
        <template if="{{ projectRoute['projectHash'] == null && adminRoute['projectHash'] == null }}">
          <section name="splash">
            <span fit class="splash wide" cross-fade></span>
          </section>
          <section name="home">
            <div layout horizontal wrap center-justified>
              <div id="card-new" self-center layout vertical>
                <div fit id="title-box">
                  <div id="title">New project</div>
                </div>
                <div id="title-box-substitute"></div>
                <div id="text-box">
                  Create a new project and administrate it for your teams.
                </div>
                <div flex></div>
                <paper-button hidden self-center id="new-button" raised class="colored custom raised-button" autofocus tabindex="0">
                  <core-icon icon="create" aria-label="create" role="img"></core-icon>
                  Create project
                </paper-button>
              </div>
              <div id="card-link" self-center layout vertical>
                <div fit id="title-box">
                  <div id="title">... or use link</div>
                </div>
                <div id="title-box-substitute"></div>
                <div id="text-box">
                  If you just want to fill in your competences as a user, ask your administrator for the deep link to your project.
                </div>
                <div flex></div>
              </div>
            </div>
          </section>
        </template>

        <!-- Admin -->
        <template if="{{ adminRoute['projectHash'] != null }}">
          <section name="splash">
            <span fit class="splash wide" cross-fade></span>
          </section>
          <section name="input" vertical layout>
            <pane-input></pane-input>
          </section>
          <section name="output" vertical layout>

          </section>
        </template>

        <!-- Project -->
        <template if="{{ projectRoute['projectHash'] != null }}">
          <section name="splash">
            <span fit class="splash wide" cross-fade></span>
          </section>
          <section name="join" vertical layout>
            <pane-join></pane-join>
          </section>
          <template repeat="{{category in categories}}">
            <section name="{{category.name}}" id="{{category.name}}" vertical layout>
              <category-pane id="list1" subcategories="{{category.subcategories}}" cross-fade></category-pane>
            </section>
          </template>
        </template>

      </core-animated-pages>

      <paper-action-dialog id="about-dialog" heading="About CompetenceMatrix"
        transition="paper-transition-center" backdrop="true">
        <p>Made with Polymer and Dart in October 2014.</p>
        <p>Copyright 2014-2015 pjv.</p>
        <paper-button dismissive tabindex="0" autofocus class="flat-button">Close</paper-button>
      </paper-action-dialog>

      <paper-toast id="toast" text="Connection timed out. Showing limited messages.">
        <paper-button dismissive tabindex="0" autofocus class="flat-button">Retry</paper-button>
      </paper-toast>
    </core-scaffold>
    </template>


    <script src="main.dart" type="application/dart"></script>
    <!--Not if own main: <script type="application/dart">export 'package:polymer/init.dart';</script>-->
    <script src="packages/browser/dart.js"></script>
  </body>
</html>
